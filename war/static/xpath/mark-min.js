var k=1,l=0,aa=null,n=0;function t(a){return null==a||"null"==a||""==a||void 0==a||"undefined"==a||[]==a||void 0==jQuery(a).get(0).tagName}function u(a,b){jQuery(a).append(b)}function v(a,b,c,d,e,g){a.css({left:b,top:c,width:d,height:e});a.css({"z-index":99999,position:"absolute","background-color":"#facd93"});a.css(g,"1px dashed #000")}function w(a,b,c,d,e){a.css({left:b,top:c,width:d,height:e});a.css({"z-index":99999,position:"absolute","background-color":"#000",opacity:.5})}
function ba(a){var b="#F9AEAE #F1C194 #F3E13B #CEF57B #9CF994 #75D8BA #55C5F5 #A7A5E4 #D291FF #FF91D5 #EBD2D6".split(" "),c=b.length;a>=c&&(a=c-1);return b[a]}
function x(a,b,c,d){n+=1;var e="";b&&(e="<div class='ncx_selector' style='background-color:"+d+";'><a class='ncx-highlight-button ncx-accept-highlight' lang='"+c+"'></a><a class='ncx-highlight-button ncx-reject-highlight' lang='"+c+"'></a></div>");jQuery("#ncx_curlCover").append("<div id='ncx_traceHighlight_top_"+n+"' class='ncx_highlightTool'></div>");jQuery("#ncx_curlCover").append("<div id='ncx_traceHighlight_right_"+n+"' class='ncx_highlightTool'></div>");jQuery("#ncx_curlCover").append("<div id='ncx_traceHighlight_bottom_"+
n+"' class='ncx_highlightTool'>"+e+"</div>");jQuery("#ncx_curlCover").append("<div id='ncx_traceHighlight_left_"+n+"' class='ncx_highlightTool'></div>");b=jQuery("#ncx_traceHighlight_top_"+n+"");d=jQuery("#ncx_traceHighlight_right_"+n+"");var e=jQuery("#ncx_traceHighlight_bottom_"+n+""),g=jQuery("#ncx_traceHighlight_left_"+n+"");c=jQuery(a).offset();var f=jQuery(a).outerWidth();a=jQuery(a).outerHeight();var h=jQuery(document).width();f>h&&(f=h-8);v(b,c.left-2,c.top-2,f+4,2,"border-bottom");v(d,c.left+
f,c.top,2,a,"border-left");v(e,c.left-2,c.top+a,f+4,2,"border-top");v(g,c.left-2,c.top,2,a,"border-right")}
function ca(a){jQuery(".ncx_highlightTool").remove();var b=jQuery(a).offset().top,c=jQuery(a).offset().left,d=jQuery(a).outerWidth(),e=jQuery(a).outerHeight(),g=jQuery(document.body).outerHeight(),f=jQuery(document.body).outerWidth();d>f+8&&(d=f);u("#ncx_curlCover","<div id='ncx_highlightCover_top' class='ncx_highlightTool'></div>");u("#ncx_curlCover","<div id='ncx_highlightCover_right' class='ncx_highlightTool'></div>");u("#ncx_curlCover","<div id='ncx_highlightCover_bottom' class='ncx_highlightTool'></div>");
u("#ncx_curlCover","<div id='ncx_highlightCover_left' class='ncx_highlightTool'></div>");var h=jQuery("#ncx_highlightCover_top"),m=jQuery("#ncx_highlightCover_right"),p=jQuery("#ncx_highlightCover_bottom"),r=jQuery("#ncx_highlightCover_left");w(h,0,0,f+8,b-3);w(m,c+3+d,b-3,f-c-3-d+8,e+6);w(p,0,b+3+e,f+8,g-b-e+155);w(r,0,b-3,c-3,e+6);k=0;u("#ncx_curlCover","<div id='ncx_editHighlight_top' class='ncx_highlightTool'></div>");u("#ncx_curlCover","<div id='ncx_editHighlight_right' class='ncx_highlightTool'></div>");
u("#ncx_curlCover","<div id='ncx_editHighlight_bottom' class='ncx_highlightTool'></div>");u("#ncx_curlCover","<div id='ncx_editHighlight_left' class='ncx_highlightTool'></div>");b=jQuery("#ncx_editHighlight_top");c=jQuery("#ncx_editHighlight_right");e=jQuery("#ncx_editHighlight_bottom");g=jQuery("#ncx_editHighlight_left");f=jQuery(a).offset();v(b,f.left-2,f.top-2,d+4,2,"border-bottom");v(c,f.left+d,f.top,2,jQuery(a).outerHeight(),"border-left");v(e,f.left-2,f.top+jQuery(a).outerHeight(),d+4,2,"border-top");
v(g,f.left-2,f.top,2,jQuery(a).outerHeight(),"border-right");jQuery(".ncx_highlightTool").click(function(){y()})}function y(){jQuery(".ncx_highlightTool").remove();jQuery("#ncx_edit_tpl_tool").remove();k=1;jQuery("#ncx_curlCover").css({"pointer-events":"none"});0==z&&jQuery("#ncx_toolbar .ncx-datatypes .active .ncx-count").text("0")}
function A(a,b,c){if(z){B=null;for(var d=D.length,e=d-1;0<e;e--)if("a"==D[e]||0==D[e].indexOf("a:")){for(var g=[],d=e,f=0;f<=d;f++)g[f]=D[f];e=g.join("");e=e.replace(":nth-of-type(*)","");a=jQuery(document).find(e)[0];D=g.slice(0);B=g.slice(0);break}if(null==B){y();return}}jQuery(".ncx_highlightTool").remove();var h=null,m=0;if(!z&&1<E.length){h=E[1].a;e=1;for(d=E.length;e<d;e++)for(f=0,g=E[e].a.length;f<g;f++)-1!=E[e].a[f].indexOf(":nth-of-type(*)")&&(h=E[e].a);m=h.length}g=0;if(!c)for(e=0,d=B.length;e<
d;e++)if(-1!=B[e].indexOf(":nth-of-type(*)")){if(null!=h)if(m>e){if(-1==h[e].indexOf(":nth-of-type(*)")){B[e]=D[e];continue}}else{B[e]=D[e];continue}g++}c=!1;if(0<g)c=!0,jQuery("#ncx_edit_tpl_tool").remove(),b=k=1;else{ca(a);1===b?da(a):ea(a);e=B.join("");jQuery("#ncx_copy_xpath_text").text(e);d=jQuery(a).get(0);jQuery("select[name='ncx_attr']").empty();jQuery("select[name='ncx_attr']").append('<option value=""></option>');g=!1;e=0;h=d.attributes;for(m=h.length;e<m;e++)f=h[e].nodeName.toLowerCase(),
"class"!=f&&"style"!=f&&"target"!=f&&"width"!=f&&"height"!=f&&0!=f.indexOf("on")&&(jQuery("select[name='ncx_attr']").append('<option value="'+f+'">'+f+"</option>"),g=!0);g?(jQuery("input[name='ncx_selectType'][value='@ATTR']").attr("disabled",!1),jQuery("select[name='ncx_attr']").attr("disabled",!1)):(jQuery("input[name='ncx_selectType'][value='@ATTR']").attr("disabled",!0),jQuery("select[name='ncx_attr']").attr("disabled",!0));("img"==d.tagName.toLowerCase()||z)&&g?(jQuery("select[name='ncx_attr'] option:nth-child(2)").attr("selected",
!0),jQuery("input[name='ncx_selectType'][value='@ATTR']").attr("checked",!0),jQuery("select[name='ncx_attr']").change()):(jQuery("input[name='ncx_selectType'][value='innerHTML']").attr("checked",!0),e=d.innerHTML,jQuery("#ncx_content_preview").text(e))}g=0;h=[];e=m=0;for(d=B.length;e<d;e++)if(h[e]=B[e],-1!=h[e].indexOf(":nth-of-type(*)")){for(f=e+1;f<d;f++)h[f]=D[f];var f=h.join(""),f=f.replace(":nth-of-type(*)",""),f=jQuery(document).find(f),p=f.length,g=g+p,r=ba(m);m++;for(var q=0;q<p;q++){var C=
f[q];F(a,C)?x(C,!1,e,null):x(C,c,e,r)}h[e]=D[e]}0==g&&g++;z||jQuery("#ncx_toolbar .ncx-datatypes .active .ncx-count").text(g);jQuery(".ncx-accept-highlight").unbind("click").click(function(){for(var c=jQuery(this).attr("lang"),d=0,e=B.length;d<e;d++)-1!=B[d].indexOf(":nth-of-type(*)")&&c!=d&&(B[d]=D[d]);A(a,b,!0)});jQuery(".ncx-reject-highlight").unbind("click").click(function(){for(var d=jQuery(this).attr("lang"),c=0,e=B.length;c<e;c++)-1!=B[c].indexOf(":nth-of-type(*)")&&d==c&&(B[c]=D[c]);A(a,b,
!1)})}var G=0,H=[],I={},B=[],D=[];function fa(a){H.push(a);a=jQuery(a).parent();var b=a.get(0);return t(b)?H:fa(a)}function da(a){I=a;jQuery("#ncx_edit_tpl_tool").remove();u("#ncx_cover-container",J("et_wrap"));K("ncx_et_state_10");ga(a);ha();H=[];fa(a);jQuery("#ncx_edit_tpl_tool").removeData("child");jQuery("#ncx_edit_tpl_tool").data("child",H)}
function ea(a){I=a;ga(a);a=jQuery(I).get(0).innerHTML;jQuery("#ncx_content_preview").text(a);jQuery("#ncx_copy_xpath_tips").text("");jQuery("#ncx_copy_xpath_text").css({"background-color":"white"});jQuery("#ncx_copy_csspath_tips").text("");jQuery("#ncx_copy_csspath_text").css({"background-color":"white"})}
function ga(a){var b=jQuery(a).offset().top,c=jQuery(a).offset().left,d=jQuery(a).outerWidth(),e=jQuery(a).outerHeight(),g=jQuery(document.body).outerHeight();a=jQuery(document.body).outerWidth();65>g-b-e?(d=c+d-400,b+=1,0>=d&&(d=0),d>a&&(d=a-8),0>b&&(b=0),jQuery("#ncx_edit_tpl_tool").css({left:c+"px",top:b+"px"})):(d=c+d-397,b=b+e+3,0>=d&&(d=0),d>a&&(d=a-499),jQuery("#ncx_edit_tpl_tool").css({left:c+"px",top:b+"px"}));jQuery(window).scrollTop(b-300);jQuery(window).scrollLeft(d-200)}
function J(a){var b="";switch(a){case "et_wrap":b="<div class='ncx_edit_tpl_tool' style='position : absolute; z-index : 999990;' id='ncx_edit_tpl_tool'><ul id='ncx_et_bar' class='ncx_et_bar'><li class='ncx_col1'><div id='ncx_larger' class='ncx_larger'></div><div id='ncx_smaller' class='ncx_smaller'></div></li><li class='ncx_col4' id='ncx_et_state_4'><span class='ncx_bar_button_tilte'>Preview</span></li>";b+="</ul><div id='ncx_et_content' class='ncx_et_content'></div><div id='ncx_et_content_footer' class='ncx_et_content_footer'></div></div>";
break;case "et_conetent_inner_20":b="<div class='ncx_et_content_inner' id='ncx_copy_xpath_container' style='position:relative'><pre id='ncx_copy_xpath_text' class='ncx_xpath'>xpath express test!!!</pre>";b+="<div class='ncx_button'><button id='ncx_copy_xpath_button' class='ncx_xpath_copy'>Copy Selector</button><button class='ncx_et_cancel'></button></div>";b+="<div id='ncx_copy_xpath_tips' class='ncx_tips'></div>";b+="</div>";break;case "et_conetent_inner_30":b="<div class='ncx_et_content_inner' id='ncx_copy_csspath_container' style='position:relative'><pre id='ncx_copy_csspath_text' class='ncx_csspath'>csspath express test!!!</pre>";
b+="<div class='ncx_button'><button id='ncx_copy_csspath_button' class='ncx_csspath_copy'>Copy Selector</button><button class='ncx_et_cancel'></button></div>";b+="<div id='ncx_copy_csspath_tips' class='ncx_tips'></div>";b+="</div>";break;case "et_conetent_inner_40":b="<div class='ncx_et_content_inner'><div><pre id='ncx_copy_xpath_text' class='ncx_xpath ncx_expression'>xpath express test!!!</pre></div>",b+="<div style='height: 22px;'>",b+="<div style='float:left;margin-left:0px;width:80px;'><input name='ncx_selectType' type='radio' value='outerHTML' style='vertical-align: middle;'><span>outerHTML</span></div>",
b+="<div style='float:left;margin-left:0px;width:80px;'><input name='ncx_selectType' type='radio' value='innerHTML' style='vertical-align: middle;' checked='checked' ><span>innerHTML</span></div>",b+="<div style='float:left;margin-left:0px;width:80px;'><input name='ncx_selectType' type='radio' value='innerTEXT' style='vertical-align: middle;'><span>innerTEXT</span></div>",b+="<div style='float:left;margin-left:0px;width:80px;'><input name='ncx_selectType' type='radio' value='@ATTR' style='vertical-align: middle;display:none;'><span><select name='ncx_attr'></select></span></div>",
b+="</div>",b+="<div><pre id='ncx_content_preview' class='ncx_content'></pre></div>",b+="<div class='ncx_button'>",b+="<button id='ncx_copy_xpath_button' class='ncx_xpath_copy'>Copy Selector</button>",b+="<button class='ncx_et_cancel'></button>",b+="<button class='ncx_et_create'></button>",b+="</div>",b+="<div class='ncx_tips'></div></div>"}return b}
function L(){var a=new ZeroClipboard(document.getElementById("ncx_copy_csspath_button"));a.on("ready",function(){a.on("copy",function(a){a.clipboardData.setData("text/plain",jQuery("#ncx_copy_csspath_text").text())});a.on("aftercopy",function(){jQuery(".ncx_tips").text("Copied CssPath.");jQuery(".ncx_expression").css({"background-color":"white"});jQuery("#ncx_copy_csspath_text").css({"background-color":"rgb(236, 248, 233)"})})});var b=new ZeroClipboard(document.getElementById("ncx_copy_xpath_button"));
b.on("ready",function(){b.on("copy",function(a){a.clipboardData.setData("text/plain",jQuery("#ncx_copy_xpath_text").text())});b.on("aftercopy",function(){jQuery(".ncx_tips").text("Copied XPath.");jQuery(".ncx_expression").css({"background-color":"white"});jQuery("#ncx_copy_xpath_text").css({"background-color":"rgb(236, 248, 233)"})})})}
function K(a){jQuery("#ncx_et_bar").removeClass("ncx_shape1");jQuery(".ncx_bar_button_tilte").removeClass("ncx_on");jQuery("#ncx_et_content").removeClass("ncx_shape1");jQuery("#ncx_et_content_footer").removeClass("ncx_shape1");jQuery("#ncx_et_content").empty();switch(a){case "ncx_et_state_10":jQuery("#ncx_et_bar").addClass("ncx_shape1");break;case "ncx_et_state_20":jQuery("#ncx_et_bar").addClass("ncx_shape1");jQuery(".ncx_col2 > .ncx_bar_button_tilte").addClass("ncx_on");jQuery("#ncx_et_content").addClass("ncx_shape1");
jQuery("#ncx_et_content_footer").addClass("ncx_shape1");a=J("et_conetent_inner_20");u("#ncx_et_content",a);a=M(jQuery(I).get(0));jQuery("#ncx_copy_xpath_text").text(a);L();break;case "ncx_et_state_30":jQuery("#ncx_et_bar").addClass("ncx_shape1");jQuery(".ncx_col3 > .ncx_bar_button_tilte").addClass("ncx_on");jQuery("#ncx_et_content").addClass("ncx_shape1");jQuery("#ncx_et_content_footer").addClass("ncx_shape1");a=J("et_conetent_inner_30");u("#ncx_et_content",a);a=M(jQuery(I).get(0));jQuery("#ncx_copy_csspath_text").text(a);
L();break;case "ncx_et_state_40":jQuery("#ncx_et_bar").addClass("ncx_shape1"),jQuery(".ncx_col4 > .ncx_bar_button_tilte").addClass("ncx_on"),jQuery("#ncx_et_content").addClass("ncx_shape1"),jQuery("#ncx_et_content_footer").addClass("ncx_shape1"),a=J("et_conetent_inner_40"),u("#ncx_et_content",a),jQuery(I).get(0),jQuery("select[name='ncx_attr']").unbind("change").change(function(){jQuery("input[name=ncx_selectType][value='@ATTR']").attr("checked",!0);if(""==this.value)jQuery("input[name=ncx_selectType][value='innerHTML']").attr("checked",
!0),jQuery("input[name=ncx_selectType][value='innerHTML']").click();else{var a=jQuery("select[name='ncx_attr']").val();jQuery("#ncx_content_preview").text("");var c=D.join(""),c=c.replace(":nth-of-type(*)",""),c=jQuery(document).find(c);0<c.length&&jQuery("#ncx_content_preview").text(c.attr(a))}}),jQuery("input[name=ncx_selectType]").unbind("click").click(function(){jQuery("select[name='ncx_attr']").val("");switch(jQuery(this).val()){case "outerHTML":var a=jQuery(I).get(0),a=a.outerHTML;jQuery("#ncx_content_preview").text(a);
break;case "innerHTML":a=jQuery(I).get(0);a=a.innerHTML;jQuery("#ncx_content_preview").text(a);break;case "innerTEXT":jQuery("#ncx_content_preview").text(jQuery(I).text())}}),L()}jQuery(".ncx_et_cancel").click(function(){y()});jQuery(".ncx_et_create").click(function(){var a=B.join(""),c=N,d=jQuery("input[name=ncx_selectType]:checked").val(),e=jQuery("select[name='ncx_attr']").val(),g="property";if(z)c=0,g="property"+c;else for(var f=c;500>f;f++){for(var g="property"+f,h=!1,m=1,p=E.length;m<p;m++)if(g==
E[m].name){h=!0;break}if(!h)break}O(null,c,g,a,B,d,z,e);y()})}function ia(a){var b=[];a=a.split(" > ");for(var c=0,d=a.length;c<d;c++)""!=a[c]&&(b.push(" > "),b.push(a[c]));" > "==b[0]&&(b=b.slice(1));return b}
function O(a,b,c,d,e,g,f,h){f?E[0]={id:a,index:0,name:c,b:d,a:e,f:g,c:h}:(f=d.replace(":nth-of-type(*)",""),f=jQuery(document).find(f).length,jQuery("#ncx_toolbar .ncx-datatypes .active .ncx-count").text(f),f=jQuery("#ncx_toolbar .ncx-datatypes .active"),f.addClass("ncx-blue finished"),f.attr("title",c),f.removeClass("ncx-yellow"),f.removeClass("active"),E.push({id:a,index:b,name:c,b:d,a:e,f:g,c:h}),N+=1,jQuery('<a lang="'+N+'" class="ncx-label ncx-data-dot ncx-yellow active"><span class="ncx-count">0</span><span class="ncx-delete-datatype" style="display: none;"></span></a>').insertBefore("#ncx_toolbar .ncx-datatypes .ncx-pagination"));
jQuery("#ncx_toolbar .save").attr("disabled",!1);ja()}function F(a,b){return void 0==a||void 0==b?!1:0==a.compareDocumentPosition(b)?!0:!1}
function M(a){B=[];for(D=[];a&&void 0!==a.tagName;a=a.parentNode){var b=a.tagName;if(!b)break;b=b.toLowerCase();if("ncx_cover-container"!=a.id&&"ncx_message-box"!=a.id){var c=jQuery(a).parent().children(b).not("#ncx_message-box").not("#ncx_cover-container"),d=c.length,e="",g="";if(1<d)for(var f=0;f<d;f++){var h=c[f];if(F(a,h))""==e&&(e=":nth-of-type("+(f+1)+")"),g=":nth-of-type("+(f+1)+")";else if(":nth-of-type(*)"!=e)if(0<B.length){var m=D.join(""),h=jQuery(h).find(m).length;0<h&&0<h&&(e=":nth-of-type(*)")}else e=
":nth-of-type(*)"}""==e&&(g=e="");if("html"==b||"body"==b)g=e="";e=b+e;g=b+g;b=ka(g);c=!1;d="#";f="";a.className&&!/\s/.test(a.className)?(c=!0,d=".",f=a.className):a.id&&!/\s/.test(a.id)&&(c=!0,f=a.id);if(c){if(z)for(c=!1,h=0,m=B.length;h<m;h++)if("a"==B[h]||0==B[h].indexOf("a[")){c=!0;break}if(c&&(c=d+f,ka(c)==b&&la(c,0)))if(1<E.length){if(c==E[1].a[0]){B.unshift(c);D.unshift(c);break}}else{B.unshift(c);D.unshift(c);break}}B.unshift(e);B.unshift(" > ");D.unshift(g);D.unshift(" > ")}}" > "==B[0]&&
(B=B.slice(1),D=D.slice(1));return B.join("")}function la(a,b){for(var c=b,d=!1,e=B.slice(0),g=0,f=e.length;g<f;g++)-1!=e[g].indexOf(":nth-of-type(*)")&&(g>b||0==b?c==b?(e[g]=e[g].replace(":nth-of-type(*)",""),b=g):(d=!0,e[g]=D[g]):e[g]=D[g]);e.unshift(a);a=e.join("");var h=!0,m=null;jQuery(document).find(a).each(function(){if(null==m)m=ma(this,e);else{var a=ma(this,e);if(!F(a[0],m[0]))return h=!1}});return d?h&&la(a,b):h}
function ma(a,b){for(var c=b.length/2-1,d=jQuery(a).parent(),e=0;e<c;e++)d=jQuery(d).parent();return d}function ka(a){for(var b=B.slice(0),c=0,d=b.length;c<d;c++)-1!=b[c].indexOf(":nth-of-type(*)")&&(b[c]=D[c]);b.unshift(a);a=b.join("");return jQuery(document).find(a).length}
function ha(){jQuery("#ncx_larger").mouseover(function(){jQuery(this).addClass("ncx_on")});jQuery("#ncx_smaller").mouseover(function(){jQuery(this).addClass("ncx_on")});jQuery("#ncx_larger").mouseout(function(){jQuery(this).removeClass("ncx_on")});jQuery("#ncx_smaller").mouseout(function(){jQuery(this).removeClass("ncx_on")});jQuery(".ncx_bar_button_tilte").mouseover(function(){jQuery(this).addClass("ncx_onhover")});jQuery(".ncx_bar_button_tilte").mouseout(function(){jQuery(this).removeClass("ncx_onhover")});
jQuery("#ncx_larger").click(function(){var a=jQuery("#ncx_edit_tpl_tool").data("child");G<a.length&&G++;a=a[G];t(a)||(M(jQuery(a).get(0)),A(jQuery(a).get(0),2,!1))});jQuery("#ncx_smaller").click(function(){var a=jQuery("#ncx_edit_tpl_tool").data("child");0<G&&G--;a=a[G];t(a)||(M(jQuery(a).get(0)),A(jQuery(a).get(0),2,!1))});jQuery("#ncx_et_state_2").click(function(){K("ncx_et_state_20")});jQuery("#ncx_et_state_3").click(function(){K("ncx_et_state_30")});jQuery("#ncx_et_state_4").click(function(){K("ncx_et_state_40")});
jQuery("#ncx_et_state_4").trigger("click")}var N=1,z=!1,E=[],P=null,Q=null,R=null,S=0,na=null,T=null,U=null;
function oa(){jQuery(document).find("*").unbind();jQuery(document.body).append('<div id="ncx_cover-container"><div id="ncx_curlCover" class="ncx_curlCover"  style="z-index : 99999; filter:Alpha(Opacity=100); -moz-opacity: 1; opacity: 1;  pointer-events:none; text-align: left; background : transparent;   "></div></div>');jQuery(document.body).css({cursor:"pointer"});jQuery(document.body).css({"margin-top":"48px"});document.title="New Crawler\u2122 "+document.title;P=V("webCrawlerId");Q=V("siteId");
R=V("rulesVerId");var a=jQuery(document).height(),b=jQuery(document).width();600>b&&(b=980);jQuery("#ncx_curlCover").css({width:b,height:a+8})}
function pa(){jQuery("a").unbind("click").click(function(){return!1});jQuery(document.body).contents().find("*").not(".ncx_curlCover").not(".ncx_highlightTool").each(function(){jQuery(this).off()});jQuery(document.body).contents().find("*").not(".ncx_curlCover").not(".ncx_highlightTool").each(function(){this.onclick=function(){return!1}});jQuery(document.body).contents().find("*").not(".ncx_curlCover").not(".ncx_highlightTool").mouseover(function(a){a=a||window.event;a=a.target||a.srcElement;if("html"!=
jQuery(a).get(0).tagName.toLowerCase()&&"ncx_highlightTool"!=jQuery(a).attr("class")&&1==k){l=1;aa=a;jQuery(".ncx_highlightTool").remove();jQuery("#ncx_curlCover").append("<div id='ncx_traceHighlight_top' class='ncx_highlightTool'></div>");jQuery("#ncx_curlCover").append("<div id='ncx_traceHighlight_right' class='ncx_highlightTool'></div>");jQuery("#ncx_curlCover").append("<div id='ncx_traceHighlight_bottom' class='ncx_highlightTool'></div>");jQuery("#ncx_curlCover").append("<div id='ncx_traceHighlight_left' class='ncx_highlightTool'></div>");
var b=jQuery("#ncx_traceHighlight_top"),c=jQuery("#ncx_traceHighlight_right"),d=jQuery("#ncx_traceHighlight_bottom"),e=jQuery("#ncx_traceHighlight_left"),g=jQuery(a).offset(),f=jQuery(a).outerWidth(),h=jQuery(document).width();f>h&&(f=h-8);v(b,g.left-2,g.top-2,f+4,2,"border-bottom");v(c,g.left+f,g.top,2,jQuery(a).outerHeight(),"border-left");v(d,g.left-2,g.top+jQuery(a).outerHeight(),f+4,2,"border-top");v(e,g.left-2,g.top,2,jQuery(a).outerHeight(),"border-right")}return!1});jQuery(document.body).contents().find("*").not(".ncx_curlCover").not(".ncx_highlightTool").each(function(){jQuery(this).click(function(){G=
0;if(1==l){var a=aa;jQuery("#ncx_toolbar .ncx-datatypes .active").hasClass("ncx-cron")&&(jQuery("#ncx_toolbar .ncx-datatypes .ncx-cron").removeClass("active"),jQuery(".ncx-cron-config").hide(),jQuery("#ncx_toolbar .ncx-datatypes .ncx-data-dot.ncx-yellow").addClass("active"));jQuery("#ncx_toolbar .ncx-datatypes .active").hasClass("ncx-setting")&&(jQuery("#ncx_toolbar .ncx-datatypes .ncx-setting").removeClass("active"),jQuery(".ncx-setting-config").hide(),jQuery("#ncx_toolbar .ncx-datatypes .ncx-data-dot.ncx-yellow").addClass("active"));
z=jQuery("#ncx_toolbar .ncx-datatypes .active").hasClass("ncx-pagination")?!0:!1;M(a);jQuery("#ncx_curlCover").css({"pointer-events":"auto"});A(a,1,!1)}return!1})})}
function ja(){jQuery("#ncx_toolbar .ncx-datatypes .ncx-data-dot .ncx-delete-datatype").click(function(){var a=jQuery(this).parent().attr("lang"),b=[];b.push(E[0]);for(var c=1,d=E.length;c<d;c++)a!=E[c].index&&b.push(E[c]);E=b;jQuery(this).parent().remove();void 0==jQuery("#ncx_toolbar .ncx-datatypes .ncx-label.finished")&&jQuery("#ncx_toolbar .save").attr("disabled",!0)});jQuery("#ncx_toolbar .ncx-datatypes .ncx-label.finished").mouseout(function(){jQuery(this).find(".ncx-delete-datatype").hide();
jQuery(this).find(".ncx-delete-datatype").removeClass("visible")});jQuery("#ncx_toolbar .ncx-datatypes .ncx-data-dot").unbind("click").click(function(){if(jQuery(this).hasClass("ncx-pagination")||jQuery(this).hasClass("ncx-cron")||jQuery(this).hasClass("ncx-setting")){var a=jQuery(this).hasClass("active");a||(jQuery("#ncx_toolbar .ncx-data-dot").each(function(){jQuery(this).removeClass("active")}),jQuery(this).addClass("active"));jQuery(this).hasClass("ncx-cron")?jQuery(".ncx-cron-config").is(":visible")?
(jQuery(".ncx-cron-config").hide(),jQuery(this).removeClass("active")):jQuery(".ncx-cron-config").show():jQuery(".ncx-cron-config").hide();jQuery(this).hasClass("ncx-setting")?jQuery(".ncx-setting-config").is(":visible")?(jQuery(".ncx-setting-config").hide(),jQuery(this).removeClass("active")):jQuery(".ncx-setting-config").show():jQuery(".ncx-setting-config").hide()}else jQuery(this).hasClass("ncx-label")&&!jQuery(this).hasClass("finished")&&(a=jQuery(this).hasClass("active"),a||(jQuery(this).addClass("active"),
jQuery("#ncx_toolbar .ncx-datatypes .ncx-pagination").removeClass("active"),jQuery("#ncx_toolbar .ncx-datatypes .ncx-cron").removeClass("active"),jQuery("#ncx_toolbar .ncx-datatypes .ncx-setting").removeClass("active"),jQuery(".ncx-cron-config").hide(),jQuery(".ncx-setting-config").hide()));a=jQuery(this).attr("lang");if(null!=a&&""!=a&&void 0!=a)for(var b in E)if(a==E[b].index){var c=E[b].b;E[b].a.slice(0);for(var c=c.replace(":nth-of-type(*)",""),c=jQuery(document).find(c),d=c.length,e=0;e<d;e++){var g=
c[e];if(0==e){var f=jQuery(g).offset().top,g=jQuery(g).outerHeight(),h=0;65>jQuery(document.body).outerHeight()-f-g?(h=f+1,0>h&&(h=0)):h=f+g+3;jQuery(window).scrollTop(h-300)}}}});jQuery("#ncx_toolbar .ncx-datatypes .ncx-data-dot").unbind("mouseover");jQuery("#ncx_toolbar .ncx-datatypes .ncx-data-dot").mouseover(function(){jQuery(this).hasClass("ncx-label")&&jQuery(this).hasClass("finished")&&(jQuery(this).find(".ncx-delete-datatype").show(),jQuery(this).find(".ncx-delete-datatype").addClass("visible"));
y();var a=jQuery(this).attr("lang");if(null!=a&&""!=a&&void 0!=a)for(var b in E)if(a==E[b].index){var c=E[b].b;E[b].a.slice(0);for(var c=c.replace(":nth-of-type(*)",""),c=jQuery(document).find(c),d=c.length,e=0;e<d;e++)x(c[e],!1,0,null)}})}function V(a){for(var b=window.location.search.substring(1).split("&"),c=0;c<b.length;c++){var d=b[c].split("=");if(d[0]==a)return d[1]}return""}
function qa(a){if(null!=P&&void 0!=P&&!isNaN(P)){var b=document.location.href,b=b.substring(b.indexOf("://")+3,b.indexOf("/member/")),c="http://"+b+"/static/xpath/v2/toolbar.html";jQuery.ajax({type:"GET",url:c,async:!0,cache:!0,success:function(d){jQuery("body").append(d);jQuery("#ncx_toolbar .save").attr("disabled",!0);E[0]={};var e=null;if(null!=Q&&null!=R&&(c="http://"+b+"/member/rules/query?webCrawlerId="+P+"&siteId="+Q+"&rulesVerId="+R,jQuery.ajax({type:"GET",dataType:"json",url:c,async:!1,success:function(a){e=
a}}),null!=e&&""!=e)){d=e.cronId;var g=e.cronDate,f=e.cronTime,h=e.pluginId,m=e.isJs,p=e.charset,r=e.headers;jQuery(".ncx-js input[type=checkbox][name='ncx-isJs']").attr("checked",m);jQuery(".ncx-js #ncx-pluginId").val(h);jQuery("#ncx_toolbar #ncx-cron-id").val(d);jQuery("#ncx_toolbar #ncx-cron-date").val(g);jQuery("#ncx_toolbar #ncx-cron-time").val(f);jQuery("#ncx_toolbar #ncx-charset").val(p);jQuery("#ncx_toolbar #ncx-headers").val(r);jQuery("#ncx_toolbar #ncx-charset-select").val(p);null!=p&&""!=
p&&jQuery("#ncx_toolbar #ncx-charset").hide();var e=e.rules,q;for(q in e)isNaN(q)||"csspath"!=e[q].searchMode||(d=e[q].id,g=e[q].name,f=e[q].selectExpress,h=e[q].selectType,m=e[q].selectAttr,p=e[q].labelType,r=ia(f),"2"==p?O(d,0,g,f,r,h,!0,m):O(d,N,g,f,r,h,!1,m))}jQuery("#ncx_toolbar #url").val(newcrawler_fetch_url);jQuery("#ncx_toolbar .ncx-save").click(function(){ra(b,function(){})});jQuery("#ncx_toolbar .ncx-view").click(function(){null==P||void 0==P||isNaN(P)||(logsViewConsole.v.webCrawlerId=
P,jQuery(".logsViewConsole").click());jQuery("#ncx_toolview .ncx-content-top-export").hide(100);jQuery(".view-pop").toggle(600);jQuery("#ncx_toolview").toggle(600,function(){jQuery("#ncx_toolview").is(":visible")?(document.body.parentNode.style.overflow="hidden",jQuery("#ncx-crawlDataLog").show(),U.init(),sa(),jQuery(window).resize(function(){jQuery("#ncx_toolview").height(jQuery(window).height()-48);jQuery(".logsViewConsoleWindow").height(jQuery(".ncx-content-bottom").height()-jQuery("#ncx-crawlDataLogList").height());
jQuery("#ncx_toolview").width(jQuery(window).width())}),jQuery(window).trigger("resize"),$(window).css("overflow","hidden")):(document.body.parentNode.style.overflow="auto",jQuery("#ncx-crawlDataLog").hide(),U.destory(),$(window).css("overflow","auto"))})});jQuery("#ncx_toolbar .ncx-js .isJavaScript").click(function(){ra(b,function(){window.location.href=T})});jQuery("#ncx_toolview .ncx-refresh").click(function(){sa()});jQuery("#ncx_toolview .ncx-prevPage").click(function(){0<S&&W(S-1)});jQuery("#ncx_toolview .ncx-nextPage").click(function(){W(S+
1)});jQuery("#ncx_toolview .ncx-export").click(function(){jQuery("#ncx_toolview .ncx-content-top-export").toggle(100)});jQuery("#ncx_toolview .ncx-export-plotly").click(function(){var a=ta(),b=jQuery('<div id="hiddenform" style="display:none;"><form action="https://plot.ly/datagrid" method="post" target="_blank" accept-charset="utf-8"><input type="text" name="data" /></form></div>').appendTo("body"),a=JSON.stringify(a);b.find("input").val(a);b.find("form").submit();b.remove()});jQuery("#ncx_toolview .ncx-export-coding").click(function(){if(null!=
Q){var a=newcrawler_server_url+"api/data/export?siteId="+Q+"&pageNum="+S+"&type=json";jQuery("#ncx_toolview .ncx-export-coding").attr("href",a)}});jQuery("#ncx_toolview .ncx-run").click(function(){var a=jQuery("#ncx_toolbar #ncx-cron-id").val();jsonrpc.scheduleService.execute(function(a,b){b?X("fade","System errors.",3E3):a&&(X("fade","Task running...",3E3),setTimeout(function(){U.init()},2E3))},P,Q,a)});jQuery("#ncx_toolview .ncx-download").click(function(){var a=newcrawler_server_url+"member/api/data/download?startIndex="+
30*S+"&siteId="+Q;jQuery("#ncx_toolview .downloadCsv").attr("href",a);jQuery("#ncx_toolview .downloadCsv span").click()});jQuery("#ncx_toolbar #ncx-charset-select").change(function(){var a=jQuery("#ncx_toolbar #ncx-charset-select").val();null==a||""==a?(jQuery("#ncx_toolbar #ncx-charset").show(),jQuery("#ncx_toolbar #ncx-charset").val("")):(jQuery("#ncx_toolbar #ncx-charset").hide(),jQuery("#ncx_toolbar #ncx-charset").val(a))});ja();a&&a()}})}}
function ta(){var a={},b=na,c;for(c in b)if(!isNaN(c)){var d=eval(b[c].data),e;for(e in d){var g=d[e].name,f=d[e].value;if(null==a[g]||void 0==a[g])a[g]={data:[]};a[g].data.push(f)}d=b[c].createDate;if(null==a.createDate||void 0==a.createDate)a.createDate={data:[]};a.createDate.data.push(d)}return{cols:a}}
function ra(a,b){var c=[],d;for(d in E){var e=E[d].id,g=E[d].index,f=E[d].name,h=E[d].b,m=E[d].f,p=E[d].c;if(null!=f&&""!=f&&null!=h&&""!=h){var r="1";0==g&&(r="2");c.push({id:e,name:f,selectExpress:h,selectAttr:p,selectType:m,labelType:r})}}jQuery("#ncx_toolbar .ncx-toolbar-section.msg").html("<div class='loading'></div>");d="";null!=c&&0<c.length&&(d=JSON.stringify(c));c=jQuery("#ncx_toolbar #ncx-cron-id").val();e=jQuery("#ncx_toolbar #ncx-cron-date").val();g=jQuery("#ncx_toolbar #ncx-cron-time").val();
f="";h=!1;jQuery(".ncx-js input[type=checkbox][name='ncx-isJs']").is(":checked")&&(h=!0,f=jQuery(".ncx-js #ncx-pluginId").val());m=jQuery("#ncx_toolbar #ncx-charset").val();p=jQuery("#ncx_toolbar #ncx-headers").val();urlString="http://"+a+"/member/rules/save";jQuery.ajax({type:"POST",data:{webCrawlerId:P,siteId:Q,rulesVerId:R,rulesJson:d,url:newcrawler_fetch_url,cronId:c,cronDate:e,cronTime:g,isJs:h,pluginId:f,charset:m,headers:p},url:urlString,async:!0,dataType:"json",success:function(a){var d=a.msg;
if("1"==a.code){var c=a.cronId;null!=c&&void 0!=c&&"undefined"!=c&&jQuery("#ncx_toolbar #ncx-cron-id").val(c);var c=a.isNew,e=a.pluginId;null!=e&&void 0!=e&&"undefined"!=e&&jQuery(".ncx-js #ncx-pluginId").val(e);null!=a.siteId&&""!=a.siteId&&(Q=a.siteId,"true"==c&&(T=T+"&siteId="+Q));null!=a.rulesVerId&&""!=a.rulesVerId&&(R=a.rulesVerId,"true"==c&&(T=T+"&rulesVerId="+R));if(null!=newcrawler_refresh&&void 0!=newcrawler_refresh&&"undefined"!=newcrawler_refresh)try{newcrawler_refresh()}catch(f){console.log(f.description||
f)}d="<span style='color:green;'>"+d+"</span>";b&&b();"true"==c&&(window.location.href=T)}else d="<span style='color:red;'>"+d+"</span>";jQuery("#ncx_toolbar .ncx-toolbar-section.msg").html("<div>"+d+"</div>");setTimeout(function(){jQuery("#ncx_toolbar .ncx-toolbar-section.msg").html("")},3E3)}})}
function sa(){jQuery("#ncx_toolview > .ncx-content-top > .ncx-content-top-data table").empty();for(var a="<tr><th></th>",b=E.length,c=1;c<b;c++)var d=E[c].name,a=a+"<th>",a=a+d,a=a+"</th>";jQuery(a+"<th>createDate</th></tr>").appendTo("#ncx_toolview > .ncx-content-top > .ncx-content-top-data table");S=0;W(S)}
function W(a){var b=E.length,c=jQuery("#ncx_toolview > .ncx-content-top > .ncx-content-top-data table");ua(c);jsonrpc.crawlDataService.query(function(d){na=d=eval(d);var c=1;if(null!=d&&0<d.length){S=a;for(var g in d)if(!isNaN(g)){for(var f=eval(d[g].data),h="<tr><td>"+c+"</td>",m=d[g].createDate,p=1;p<b;p++){var r=E[p].name,q=!1,C;for(C in f)if(r==f[C].name){r=f[C].value;h+="<td>";h+=r;h+="</td>";q=!0;break}q||(h+="<td></td>")}h+="<td>"+m+"</td></tr>";jQuery(h).appendTo("#ncx_toolview > .ncx-content-top > .ncx-content-top-data table");
c++}}else{var h;jQuery("<tr><td  colspan='100'>Not Found Data.</td>").appendTo("#ncx_toolview > .ncx-content-top > .ncx-content-top-data table")}},P,{javaClass:"com.soso.web.jsonrpc.bo.CrawlDataBo",siteId:Q,startIndex:30*a,size:30,searchStarttime:null,searchEndtime:null})}function ua(a){a=a.get(0);for(var b=a.rows.length-1;0<b;b--)a.deleteRow(b)}
function Y(a,b,c){var d=document.createElement("script");d.id=c;d.setAttribute("type","text/javascript");d.setAttribute("src",b);d.onload=d.onreadystatechange=a;document.getElementsByTagName("head")[0].appendChild(d)}function Z(a,b,c){var d=document.createElement("link");d.id=c;d.setAttribute("rel","stylesheet");d.setAttribute("type","text/css");d.setAttribute("href",b);d.onload=d.onreadystatechange=a;document.getElementsByTagName("head")[0].appendChild(d)}
function X(a,b,c){var d=document.getElementById("ncx_message-box");d?(d.innerHTML="",d.style.display="none"):(d=document.createElement("div"),d.innerHTML='<div id="ncx_message-box" style="background: #FFD76E; border: 1px solid #E1BA53; border-radius: 2px;padding: 5px 15px; font-size: 12px; font-color: #333; font-weight: bold; position: fixed!important; top: 50px; left: 50%; z-index: 2147483500; display: none;"></div>',document.body.appendChild(d.firstChild),d=document.getElementById("ncx_message-box"));
"show"==a?(d.innerHTML=b,d.style.display="block",d.style.marginLeft=-(d.clientWidth/2)+"px"):"fade"==a?(d.innerHTML=b,d.style.display="block",d.style.marginLeft=-(d.clientWidth/2)+"px",setTimeout(function(){X("hide")},c)):"hide"==a&&(d.innerHTML="",d.style.display="none")}
function va(){oa();pa();T=window.location.href;try{qa(function(){$("#ncx_toolbar #ncx-cron-time").clockpicker({placement:"bottom",align:"top",autoclose:!0});jQuery("#ncx_toolbar #ncx-cron-date").datetimepicker({timepicker:!1,validateOnBlur:!1,closeOnDateSelect:!0,format:"Y-m-d"});Y(function(){JSONRpcClient.profile_async=!0;JSONRpcClient.max_req_active=5;JSONRpcClient.requestId=1;jsonrpc=new JSONRpcClient(newcrawler_server_url+"JSON-RPC/MEMBER");Y(function(){Y(function(){logsViewConsole.fn.init()},
newcrawler_server_url+"static/js/main.logsview.console-min.js","mark-logsview");Y(function(){U=new crawlDataLog({tableId:"ncx-crawlDataLog",listTableId:"ncx-crawlDataLogList",PER_PAGE_ITEMS:5,ITEMS_COUNT:0,cur_page:0,webCrawlerId:P,siteId:Q})},newcrawler_server_url+"static/js/main.crawldata.log-min.js","mark-crawldatalogs")},newcrawler_server_url+"static/xpath/depend.js","mark-depend")},newcrawler_server_url+"static/js/jsonrpc-min.js","mark-jsonrpc")})}catch(a){}}
function wa(){-1!=document.location.host.indexOf("newcrawler.com")&&(newcrawler_server_url="http://www.newcrawler.com/");"undefined"==typeof jQuery?Y(function(){xa()},newcrawler_server_url+"static/js/jquery-1.7.min.js","mark-jquery"):xa()}
function xa(){Z(function(){document.getElementById("ncx_message-box").remove();jQuery("#ncx_message-box").css({"background-color":"#BCDFB7"});X("fade","Completed.",3E3);Y(function(){Y(function(){va()},newcrawler_server_url+"static/js/datetimepicker-master/jquery.datetimepicker.min.js","mark-datetimepicker")},newcrawler_server_url+"static/js/clockpicker/dist/jquery-clockpicker.js","mark-clockpicker")},newcrawler_server_url+"static/xpath/mark.css?v2.3","mark-css");Z(function(){},newcrawler_server_url+
"static/js/datetimepicker-master/jquery.datetimepicker.css","mark-clockpicker-css");Z(function(){},newcrawler_server_url+"static/js/clockpicker/dist/jquery-clockpicker.min.css","mark-clockpicker-css");Y(function(){},newcrawler_server_url+"static/js/zeroclipboard-2.1.6/ZeroClipboard.min.js","mark-copy")}X("show","Loading...");"loaded"!=document.readyState&&"complete"!=document.readyState||wa();
document.onload=document.onreadystatechange=function(){"loaded"!=document.readyState&&"complete"!=document.readyState||wa()};nc={i18n:function(a,b){var c="";if("undefined"==ya[a])return"__"+a+"__";c=ya[a];if("object"==typeof b&&b instanceof Array)for(i=0,len=b.length;i<len;i++)var d="{"+i+"}",c=c.replace(d,b[i]);else c=c.replace("{0}",b);return c}};
var ya={"res.not.select.crawler":"Not crawler","res.logs.type.crawl":"Fetch","res.logs.type.crawl.retry":"Retry","res.logs.type.deploy":"Deploy","res.logs.type.deploy.retry":"Deploy retry","res.logs.type.download":"Download","res.logs.type.download.retry":"Download Retry","res.console.min":"Min","res.console.max":"Max","res.console.resize":"Resize","res.scheduledTasks.name1":"Fetch","res.scheduledTasks.name2":"Checker","res.scheduledTasks.name3":"Publish Data","res.scheduledTasks.name4":"Remove",
"res.scheduledTasks.name5":"Update URL","res.background.statistics":"Statistics","res.background.statistics.failure":"Statistics Failure","res.task.run.success":"Success","res.task.run.failure":"Failure","res.task.stop.success":"Success","res.task.stop.failure":"Failure","res.task.run":"Run","res.task.stop":"Stop","res.exception.url.list":"List","res.page.prev":"prev","res.page.next":"next"};
